#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ¤– Running pre-commit checks..."

# Run formatter check
echo "ğŸ¨ Checking code formatting..."
npm run format:check || {
  echo "âŒ Formatting issues found. Run 'npm run format' to fix."
  exit 1
}

# Run linter
echo "ğŸ” Running linter..."
npm run lint || {
  echo "âŒ Linting failed. Please fix the errors above."
  exit 1
}

# Validate TypeScript compilation
echo "ğŸ”§ Validating TypeScript..."
npx tsc --noEmit || {
  echo "âŒ TypeScript compilation errors found."
  exit 1
}

# Validate tests can be listed
echo "ğŸ“‹ Validating tests..."
npx playwright test --list > /dev/null || {
  echo "âŒ Test discovery failed."
  exit 1
}

echo "âœ… All pre-commit checks passed!"



